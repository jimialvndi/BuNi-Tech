<!doctype html>
<html lang="id" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BuNi Tech - Maternal Health App</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    
    * {
      font-family: 'Nunito', sans-serif;
    }
    
    /* Heartbeat Animation */
    @keyframes heartbeat-line {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }
    
    .heartbeat-animation {
      animation: heartbeat-line 2s linear infinite;
    }
    
    /* Pulse Animation */
    @keyframes pulse-ring {
      0% { transform: scale(0.95); opacity: 1; }
      50% { transform: scale(1.05); opacity: 0.8; }
      100% { transform: scale(0.95); opacity: 1; }
    }
    
    .pulse-animation {
      animation: pulse-ring 1s ease-in-out infinite;
    }
    
    /* Button Press Effect */
    .btn-press {
      transition: transform 0.1s ease, box-shadow 0.1s ease;
    }
    
    .btn-press:active {
      transform: scale(0.95);
    }
    
    /* Progress Ring */
    .progress-ring-circle {
      transition: stroke-dashoffset 0.5s ease;
      transform: rotate(-90deg);
      transform-origin: 50% 50%;
    }
    
    /* Smooth Scrolling */
    .smooth-scroll {
      scroll-behavior: smooth;
      -webkit-overflow-scrolling: touch;
    }
    
    /* Alert Flash */
    @keyframes alert-flash {
      0%, 100% { background-color: #FEE2E2; }
      50% { background-color: #FECACA; }
    }
    
    .alert-active {
      animation: alert-flash 0.5s ease-in-out infinite;
    }
    
    /* Checkbox Animation */
    .checkbox-done {
      text-decoration: line-through;
      opacity: 0.6;
    }
    
    /* Nav Icon Animation */
    .nav-icon {
      transition: all 0.2s ease;
    }
    
    .nav-icon:hover {
      transform: translateY(-2px);
    }
    
    /* Card Hover */
    .card-hover {
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    
    .card-hover:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    }
    
    /* Floating Animation */
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    .float-animation {
      animation: float 3s ease-in-out infinite;
    }
    
    /* Screen Transition */
    .screen-enter {
      animation: fadeIn 0.3s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full bg-gray-100 overflow-hidden">
  <div class="h-full w-full flex items-center justify-center p-2"><!-- Mobile Container (9:16 aspect ratio) -->
   <div id="app-container" class="relative w-full max-w-[400px] h-full max-h-[750px] bg-gradient-to-b from-[#EBF5FF] to-[#FFF0F5] rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col"><!-- Status Bar -->
    <div class="flex-shrink-0 flex justify-between items-center px-6 py-3 text-gray-600 text-sm font-medium"><span id="current-time">09:41</span>
     <div class="flex items-center gap-1">
      <svg class="w-4 h-4" fill="currentColor" viewbox="0 0 24 24"><path d="M12 3C7.46 3 3.34 4.78.29 7.67c-.18.18-.29.43-.29.71 0 .28.11.53.29.71l2.48 2.48c.18.18.43.29.71.29.27 0 .52-.11.7-.28.79-.74 1.69-1.36 2.66-1.85.33-.16.56-.5.56-.9v-3.1c1.45-.48 3-.73 4.6-.73s3.15.25 4.6.73v3.1c0 .4.23.74.56.9.97.49 1.87 1.11 2.66 1.85.18.17.43.28.7.28.28 0 .53-.11.71-.29l2.48-2.48c.18-.18.29-.43.29-.71 0-.28-.11-.53-.29-.71C20.66 4.78 16.54 3 12 3z" />
      </svg>
      <svg class="w-4 h-4" fill="currentColor" viewbox="0 0 24 24"><path d="M15.67 4H14V2h-4v2H8.33C7.6 4 7 4.6 7 5.33v15.33C7 21.4 7.6 22 8.33 22h7.33c.74 0 1.34-.6 1.34-1.33V5.33C17 4.6 16.4 4 15.67 4z" />
      </svg>
     </div>
    </div><!-- Main Content Area -->
    <div id="main-content" class="flex-1 overflow-y-auto smooth-scroll px-5 pb-24"><!-- Content will be injected here -->
    </div><!-- Bottom Navigation -->
    <div class="flex-shrink-0 absolute bottom-0 left-0 right-0 bg-white/90 backdrop-blur-lg rounded-t-[2rem] shadow-lg border-t border-white/50">
     <div class="flex justify-around items-center py-4 px-6"><button onclick="switchScreen('home')" id="nav-home" class="nav-icon flex flex-col items-center gap-1 text-pink-500">
       <svg class="w-6 h-6" fill="currentColor" viewbox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
       </svg><span class="text-xs font-semibold">Home</span> </button> <button onclick="switchScreen('health')" id="nav-health" class="nav-icon flex flex-col items-center gap-1 text-gray-400">
       <svg class="w-6 h-6" fill="currentColor" viewbox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
       </svg><span class="text-xs font-semibold">Health</span> </button> <button onclick="switchScreen('activity')" id="nav-activity" class="nav-icon flex flex-col items-center gap-1 text-gray-400">
       <svg class="w-6 h-6" fill="currentColor" viewbox="0 0 24 24"><path d="M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67zM11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8z" />
       </svg><span class="text-xs font-semibold">Activity</span> </button> <button onclick="switchScreen('schedule')" id="nav-schedule" class="nav-icon flex flex-col items-center gap-1 text-gray-400">
       <svg class="w-6 h-6" fill="currentColor" viewbox="0 0 24 24"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM9 10H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm-8 4H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z" />
       </svg><span class="text-xs font-semibold">Schedule</span> </button>
     </div>
    </div>
   </div>
  </div>
  <script>
    // Default Configuration
    const defaultConfig = {
      greeting_name: 'Mama',
      welcome_title: 'Welcome to BuNi Tech',
      step_goal: '10000',
      primary_color: '#EC4899',
      secondary_color: '#3B82F6',
      background_color: '#EBF5FF',
      text_color: '#374151',
      accent_color: '#FFF0F5'
    };

    // App State
    let config = { ...defaultConfig };
    let currentScreen = 'home';
    let steps = 3000;
    let bpm = 78;
    let bpmInterval = null;
    let alertActive = false;
    let checklist = {
      anc: false,
      water: false,
      vitamin: false
    };

    // Initialize Element SDK
    window.elementSdk.init({
      defaultConfig,
      onConfigChange: async (newConfig) => {
        config = { ...defaultConfig, ...newConfig };
        renderCurrentScreen();
      },
      mapToCapabilities: (cfg) => ({
        recolorables: [
          {
            get: () => cfg.background_color || defaultConfig.background_color,
            set: (value) => window.elementSdk.setConfig({ background_color: value })
          },
          {
            get: () => cfg.accent_color || defaultConfig.accent_color,
            set: (value) => window.elementSdk.setConfig({ accent_color: value })
          },
          {
            get: () => cfg.text_color || defaultConfig.text_color,
            set: (value) => window.elementSdk.setConfig({ text_color: value })
          },
          {
            get: () => cfg.primary_color || defaultConfig.primary_color,
            set: (value) => window.elementSdk.setConfig({ primary_color: value })
          },
          {
            get: () => cfg.secondary_color || defaultConfig.secondary_color,
            set: (value) => window.elementSdk.setConfig({ secondary_color: value })
          }
        ],
        borderables: [],
        fontEditable: undefined,
        fontSizeable: undefined
      }),
      mapToEditPanelValues: (cfg) => new Map([
        ['greeting_name', cfg.greeting_name || defaultConfig.greeting_name],
        ['welcome_title', cfg.welcome_title || defaultConfig.welcome_title],
        ['step_goal', cfg.step_goal || defaultConfig.step_goal]
      ])
    });

    // Update time
    function updateTime() {
      const now = new Date();
      const hours = now.getHours().toString().padStart(2, '0');
      const minutes = now.getMinutes().toString().padStart(2, '0');
      document.getElementById('current-time').textContent = `${hours}:${minutes}`;
    }
    setInterval(updateTime, 1000);
    updateTime();

    // Get greeting based on time
    function getGreeting() {
      const hour = new Date().getHours();
      if (hour < 12) return 'Good Morning';
      if (hour < 17) return 'Good Afternoon';
      return 'Good Evening';
    }

    // Switch Screen
    function switchScreen(screen) {
      currentScreen = screen;
      
      // Update nav icons
      ['home', 'health', 'activity', 'schedule'].forEach(s => {
        const nav = document.getElementById(`nav-${s}`);
        if (s === screen) {
          nav.classList.remove('text-gray-400');
          nav.classList.add('text-pink-500');
        } else {
          nav.classList.remove('text-pink-500');
          nav.classList.add('text-gray-400');
        }
      });

      // Clear BPM interval if leaving health screen
      if (screen !== 'health' && bpmInterval) {
        clearInterval(bpmInterval);
        bpmInterval = null;
      }

      renderCurrentScreen();
    }

    // Render Current Screen
    function renderCurrentScreen() {
      const container = document.getElementById('main-content');
      const appContainer = document.getElementById('app-container');
      
      // Apply colors
      appContainer.style.background = `linear-gradient(to bottom, ${config.background_color || defaultConfig.background_color}, ${config.accent_color || defaultConfig.accent_color})`;
      
      switch(currentScreen) {
        case 'home':
          container.innerHTML = renderHomeScreen();
          break;
        case 'health':
          container.innerHTML = renderHealthScreen();
          startBPMSimulation();
          break;
        case 'activity':
          container.innerHTML = renderActivityScreen();
          break;
        case 'schedule':
          container.innerHTML = renderScheduleScreen();
          break;
      }
    }

    // HOME SCREEN
    function renderHomeScreen() {
      const greeting = getGreeting();
      const name = config.greeting_name || defaultConfig.greeting_name;
      const welcomeTitle = config.welcome_title || defaultConfig.welcome_title;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryColor = config.primary_color || defaultConfig.primary_color;
      const secondaryColor = config.secondary_color || defaultConfig.secondary_color;
      
      return `
        <div class="screen-enter">
          <!-- Header -->
          <div class="flex justify-between items-center mb-6 pt-2">
            <div>
              <p class="text-sm font-medium" style="color: ${textColor}; opacity: 0.7">${greeting},</p>
              <h1 class="text-2xl font-bold" style="color: ${textColor}">${name}! üëã</h1>
            </div>
            <div class="w-12 h-12 rounded-full bg-gradient-to-br from-pink-300 to-pink-400 flex items-center justify-center shadow-lg">
              <span class="text-2xl">üë©</span>
            </div>
          </div>

          <!-- Welcome Card -->
          <div class="card-hover bg-white rounded-3xl p-5 shadow-lg mb-6 relative overflow-hidden">
            <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-pink-100 to-blue-100 rounded-full -mr-10 -mt-10 opacity-50"></div>
            <div class="relative z-10">
              <div class="flex items-center gap-2 mb-2">
                <span class="text-2xl">ü§∞</span>
                <span class="text-xs font-semibold px-3 py-1 rounded-full" style="background-color: ${primaryColor}20; color: ${primaryColor}">Week 24</span>
              </div>
              <h2 class="text-lg font-bold mb-1" style="color: ${textColor}">${welcomeTitle}</h2>
              <p class="text-sm" style="color: ${textColor}; opacity: 0.7">Pendamping kesehatan ibu hamil berbasis IoT</p>
              <div class="flex gap-2 mt-4">
                <div class="flex-1 bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl p-3 text-center">
                  <p class="text-xs" style="color: ${textColor}; opacity: 0.7">Berat Badan</p>
                  <p class="text-lg font-bold" style="color: ${secondaryColor}">58 kg</p>
                </div>
                <div class="flex-1 bg-gradient-to-r from-pink-50 to-pink-100 rounded-xl p-3 text-center">
                  <p class="text-xs" style="color: ${textColor}; opacity: 0.7">Tekanan Darah</p>
                  <p class="text-lg font-bold" style="color: ${primaryColor}">120/80</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Daily Checklist -->
          <div class="mb-6">
            <h3 class="text-lg font-bold mb-4" style="color: ${textColor}">üìã Daily Checklist</h3>
            <div class="space-y-3">
              ${renderChecklistItem('anc', 'üìÖ', 'Jadwal ANC', 'Kontrol rutin bulan ini', primaryColor, textColor)}
              ${renderChecklistItem('water', 'üíß', 'Minum Air', 'Target: 8 gelas/hari', secondaryColor, textColor)}
              ${renderChecklistItem('vitamin', 'üíä', 'Vitamin Prenatal', 'Setelah sarapan', primaryColor, textColor)}
            </div>
          </div>

          <!-- Quick Tips -->
          <div class="bg-white rounded-3xl p-5 shadow-lg mb-6">
            <h3 class="text-lg font-bold mb-3" style="color: ${textColor}">üí° Tips Hari Ini</h3>
            <p class="text-sm" style="color: ${textColor}; opacity: 0.8">Jalan kaki 15-30 menit setiap hari dapat membantu melancarkan sirkulasi darah dan mempersiapkan tubuh untuk persalinan.</p>
          </div>

          <!-- Doctor Illustration -->
          <div class="flex justify-center mb-4 float-animation">
            <div class="relative">
              <div class="w-32 h-32 bg-gradient-to-br from-blue-200 to-pink-200 rounded-full flex items-center justify-center">
                <span class="text-6xl">üë©‚Äç‚öïÔ∏è</span>
              </div>
              <div class="absolute -bottom-2 -right-2 bg-white rounded-full px-3 py-1 shadow-lg">
                <span class="text-xs font-semibold" style="color: ${primaryColor}">Hi, ${name}!</span>
              </div>
            </div>
          </div>
        </div>
      `;
    }

    function renderChecklistItem(key, icon, title, subtitle, color, textColor) {
      const checked = checklist[key];
      return `
        <div onclick="toggleChecklist('${key}')" 
             class="btn-press flex items-center gap-4 bg-white rounded-2xl p-4 shadow-md cursor-pointer ${checked ? 'opacity-70' : ''}">
          <div class="w-12 h-12 rounded-xl flex items-center justify-center" style="background-color: ${color}20">
            <span class="text-2xl">${icon}</span>
          </div>
          <div class="flex-1">
            <p class="font-semibold ${checked ? 'checkbox-done' : ''}" style="color: ${textColor}">${title}</p>
            <p class="text-xs" style="color: ${textColor}; opacity: 0.6">${subtitle}</p>
          </div>
          <div class="w-6 h-6 rounded-full border-2 flex items-center justify-center ${checked ? 'bg-green-500 border-green-500' : ''}" style="${!checked ? `border-color: ${color}` : ''}">
            ${checked ? '<svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>' : ''}
          </div>
        </div>
      `;
    }

    function toggleChecklist(key) {
      checklist[key] = !checklist[key];
      renderCurrentScreen();
    }

    // HEALTH SCREEN
    function renderHealthScreen() {
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryColor = config.primary_color || defaultConfig.primary_color;
      const secondaryColor = config.secondary_color || defaultConfig.secondary_color;
      
      return `
        <div class="screen-enter ${alertActive ? 'alert-active rounded-3xl' : ''}">
          <!-- Header -->
          <div class="text-center mb-6 pt-2">
            <h1 class="text-2xl font-bold" style="color: ${textColor}">‚ù§Ô∏è Health Monitor</h1>
            <p class="text-sm" style="color: ${textColor}; opacity: 0.7">Pantau kesehatan Mama & Bayi</p>
          </div>

          ${alertActive ? `
            <div class="bg-red-500 text-white rounded-2xl p-4 mb-6 shadow-lg">
              <div class="flex items-center gap-3">
                <span class="text-3xl">‚ö†Ô∏è</span>
                <div>
                  <p class="font-bold">Perhatian!</p>
                  <p class="text-sm">Detak jantung tidak stabil, tarik nafas dalam-dalam.</p>
                </div>
              </div>
              <button onclick="dismissAlert()" class="btn-press w-full mt-3 bg-white text-red-500 font-semibold py-2 rounded-xl">
                Saya Sudah Tenang
              </button>
            </div>
          ` : ''}

          <!-- BPM Card -->
          <div class="bg-white rounded-3xl p-6 shadow-lg mb-6 text-center relative overflow-hidden">
            <div class="absolute inset-0 opacity-10">
              <svg viewBox="0 0 400 100" class="w-full h-full">
                <path d="M0,50 Q25,50 50,50 T100,50 L110,20 L120,80 L130,50 Q155,50 180,50 T200,50 Q225,50 250,50 T300,50 L310,20 L320,80 L330,50 Q355,50 380,50 T400,50" 
                      stroke="${primaryColor}" fill="none" stroke-width="2"/>
              </svg>
            </div>
            <div class="relative z-10">
              <div class="pulse-animation inline-block">
                <span class="text-6xl">üíó</span>
              </div>
              <p class="text-5xl font-bold mt-2" style="color: ${secondaryColor}" id="bpm-display">${bpm}</p>
              <p class="text-sm font-medium" style="color: ${textColor}; opacity: 0.7">BPM (Beats Per Minute)</p>
              <p class="text-xs mt-2 px-4 py-1 rounded-full inline-block" style="background-color: ${bpm >= 60 && bpm <= 100 ? '#10B98120' : '#EF444420'}; color: ${bpm >= 60 && bpm <= 100 ? '#10B981' : '#EF4444'}">
                ${bpm >= 60 && bpm <= 100 ? '‚úì Normal Range' : '‚ö† Perlu Perhatian'}
              </p>
            </div>
          </div>

          <!-- Live Graph -->
          <div class="bg-white rounded-3xl p-5 shadow-lg mb-6 overflow-hidden">
            <h3 class="font-semibold mb-3" style="color: ${textColor}">üìä Live Heart Rate</h3>
            <div class="h-24 relative overflow-hidden rounded-xl bg-gradient-to-r from-blue-50 to-pink-50">
              <svg viewBox="0 0 800 100" class="absolute w-[200%] h-full heartbeat-animation" preserveAspectRatio="none">
                <path d="M0,50 L30,50 L40,50 L50,20 L60,80 L70,50 L100,50 L130,50 L140,50 L150,15 L160,85 L170,50 L200,50 L230,50 L240,50 L250,25 L260,75 L270,50 L300,50 L330,50 L340,50 L350,20 L360,80 L370,50 L400,50 L430,50 L440,50 L450,20 L460,80 L470,50 L500,50 L530,50 L540,50 L550,15 L560,85 L570,50 L600,50 L630,50 L640,50 L650,25 L660,75 L670,50 L700,50 L730,50 L740,50 L750,20 L760,80 L770,50 L800,50" 
                      stroke="${primaryColor}" fill="none" stroke-width="3" stroke-linecap="round"/>
              </svg>
            </div>
          </div>

          <!-- Stats Grid -->
          <div class="grid grid-cols-2 gap-4 mb-6">
            <div class="bg-white rounded-2xl p-4 shadow-lg text-center">
              <span class="text-3xl">ü©∫</span>
              <p class="text-2xl font-bold mt-1" style="color: ${secondaryColor}">120/80</p>
              <p class="text-xs" style="color: ${textColor}; opacity: 0.7">Tekanan Darah</p>
            </div>
            <div class="bg-white rounded-2xl p-4 shadow-lg text-center">
              <span class="text-3xl">üå°Ô∏è</span>
              <p class="text-2xl font-bold mt-1" style="color: ${secondaryColor}">36.5¬∞C</p>
              <p class="text-xs" style="color: ${textColor}; opacity: 0.7">Suhu Tubuh</p>
            </div>
          </div>

          <!-- Alert Test Button -->
          <button onclick="testAlert()" class="btn-press w-full py-4 rounded-2xl font-bold text-white shadow-lg mb-6" style="background: linear-gradient(135deg, ${primaryColor}, #EC4899)">
            üîî Tes Alert Darurat
          </button>
        </div>
      `;
    }

    function startBPMSimulation() {
      if (bpmInterval) clearInterval(bpmInterval);
      bpmInterval = setInterval(() => {
        bpm = Math.floor(Math.random() * 21) + 70; // 70-90
        const bpmDisplay = document.getElementById('bpm-display');
        if (bpmDisplay) {
          bpmDisplay.textContent = bpm;
        }
      }, 2000);
    }

    function testAlert() {
      alertActive = true;
      renderCurrentScreen();
    }

    function dismissAlert() {
      alertActive = false;
      renderCurrentScreen();
    }

    // ACTIVITY SCREEN
    function renderActivityScreen() {
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryColor = config.primary_color || defaultConfig.primary_color;
      const secondaryColor = config.secondary_color || defaultConfig.secondary_color;
      const goal = parseInt(config.step_goal || defaultConfig.step_goal);
      const progress = Math.min((steps / goal) * 100, 100);
      const circumference = 2 * Math.PI * 80;
      const offset = circumference - (progress / 100) * circumference;
      
      return `
        <div class="screen-enter">
          <!-- Header -->
          <div class="text-center mb-6 pt-2">
            <h1 class="text-2xl font-bold" style="color: ${textColor}">üèÉ‚Äç‚ôÄÔ∏è Activity Tracker</h1>
            <p class="text-sm" style="color: ${textColor}; opacity: 0.7">Pantau aktivitas harian Mama</p>
          </div>

          ${steps >= 8000 ? `
            <div class="bg-gradient-to-r from-green-400 to-emerald-500 text-white rounded-2xl p-4 mb-6 shadow-lg">
              <div class="flex items-center gap-3">
                <span class="text-3xl">üéâ</span>
                <div>
                  <p class="font-bold">Hebat, Mama!</p>
                  <p class="text-sm">Tapi jangan lupa istirahat ya, Ma. Kesehatan Mama & bayi yang utama!</p>
                </div>
              </div>
            </div>
          ` : ''}

          <!-- Progress Ring -->
          <div class="bg-white rounded-3xl p-8 shadow-lg mb-6">
            <div class="flex justify-center mb-6">
              <div class="relative">
                <svg width="200" height="200" class="transform -rotate-90">
                  <circle cx="100" cy="100" r="80" stroke="#E5E7EB" stroke-width="12" fill="none"/>
                  <circle cx="100" cy="100" r="80" 
                          stroke="url(#gradient)" 
                          stroke-width="12" 
                          fill="none"
                          stroke-linecap="round"
                          stroke-dasharray="${circumference}"
                          stroke-dashoffset="${offset}"
                          class="progress-ring-circle"/>
                  <defs>
                    <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                      <stop offset="0%" stop-color="${primaryColor}"/>
                      <stop offset="100%" stop-color="${secondaryColor}"/>
                    </linearGradient>
                  </defs>
                </svg>
                <div class="absolute inset-0 flex flex-col items-center justify-center">
                  <span class="text-4xl mb-1">üë£</span>
                  <p class="text-3xl font-bold" style="color: ${secondaryColor}">${steps.toLocaleString()}</p>
                  <p class="text-sm" style="color: ${textColor}; opacity: 0.7">/ ${goal.toLocaleString()} langkah</p>
                </div>
              </div>
            </div>
            
            <div class="text-center">
              <p class="text-lg font-semibold" style="color: ${textColor}">${Math.round(progress)}% Target Tercapai</p>
              <p class="text-sm" style="color: ${textColor}; opacity: 0.7">${goal - steps > 0 ? `${(goal - steps).toLocaleString()} langkah lagi!` : 'Target tercapai! üéâ'}</p>
            </div>
          </div>

          <!-- Simulate Button -->
          <button onclick="addSteps()" class="btn-press w-full py-4 rounded-2xl font-bold text-white shadow-lg mb-6" style="background: linear-gradient(135deg, ${secondaryColor}, #60A5FA)">
            üëü Simulasikan Jalan Kaki (+500 langkah)
          </button>

          <!-- Stats -->
          <div class="grid grid-cols-3 gap-3 mb-6">
            <div class="bg-white rounded-2xl p-4 shadow-lg text-center">
              <span class="text-2xl">üî•</span>
              <p class="text-xl font-bold mt-1" style="color: ${primaryColor}">${Math.round(steps * 0.04)}</p>
              <p class="text-xs" style="color: ${textColor}; opacity: 0.7">Kalori</p>
            </div>
            <div class="bg-white rounded-2xl p-4 shadow-lg text-center">
              <span class="text-2xl">üìè</span>
              <p class="text-xl font-bold mt-1" style="color: ${secondaryColor}">${(steps * 0.0007).toFixed(1)}</p>
              <p class="text-xs" style="color: ${textColor}; opacity: 0.7">Km</p>
            </div>
            <div class="bg-white rounded-2xl p-4 shadow-lg text-center">
              <span class="text-2xl">‚è±Ô∏è</span>
              <p class="text-xl font-bold mt-1" style="color: ${primaryColor}">${Math.round(steps / 100)}</p>
              <p class="text-xs" style="color: ${textColor}; opacity: 0.7">Menit</p>
            </div>
          </div>

          <!-- Reset Button -->
          <button onclick="resetSteps()" class="btn-press w-full py-3 rounded-2xl font-semibold border-2 mb-6" style="border-color: ${textColor}30; color: ${textColor}">
            üîÑ Reset Langkah
          </button>
        </div>
      `;
    }

    function addSteps() {
      steps += 500;
      renderCurrentScreen();
    }

    function resetSteps() {
      steps = 0;
      renderCurrentScreen();
    }

    // SCHEDULE SCREEN
    function renderScheduleScreen() {
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryColor = config.primary_color || defaultConfig.primary_color;
      const secondaryColor = config.secondary_color || defaultConfig.secondary_color;
      
      const today = new Date();
      const month = today.toLocaleString('id-ID', { month: 'long' });
      const year = today.getFullYear();
      
      // Generate calendar days
      const firstDay = new Date(today.getFullYear(), today.getMonth(), 1).getDay();
      const daysInMonth = new Date(today.getFullYear(), today.getMonth() + 1, 0).getDate();
      const currentDay = today.getDate();
      
      // ANC schedule dates (example: 10th and 24th)
      const ancDates = [10, 24];
      
      let calendarDays = '';
      for (let i = 0; i < firstDay; i++) {
        calendarDays += '<div class="text-center py-2"></div>';
      }
      for (let day = 1; day <= daysInMonth; day++) {
        const isToday = day === currentDay;
        const isANC = ancDates.includes(day);
        calendarDays += `
          <div class="text-center py-2 relative">
            <span class="inline-flex items-center justify-center w-8 h-8 rounded-full text-sm font-medium
              ${isToday ? 'text-white' : ''} 
              ${isANC && !isToday ? 'ring-2' : ''}"
              style="${isToday ? `background-color: ${primaryColor}` : ''} ${isANC && !isToday ? `ring-color: ${secondaryColor}; color: ${secondaryColor}` : `color: ${textColor}`}">
              ${day}
            </span>
            ${isANC ? `<span class="absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-1.5 h-1.5 rounded-full" style="background-color: ${secondaryColor}"></span>` : ''}
          </div>
        `;
      }
      
      return `
        <div class="screen-enter">
          <!-- Header -->
          <div class="text-center mb-6 pt-2">
            <h1 class="text-2xl font-bold" style="color: ${textColor}">üìÖ ANC Schedule</h1>
            <p class="text-sm" style="color: ${textColor}; opacity: 0.7">Jadwal kontrol kehamilan</p>
          </div>

          <!-- Calendar -->
          <div class="bg-white rounded-3xl p-5 shadow-lg mb-6">
            <div class="flex justify-between items-center mb-4">
              <h3 class="font-bold text-lg" style="color: ${textColor}">${month} ${year}</h3>
              <div class="flex gap-2">
                <span class="text-xs px-2 py-1 rounded-full" style="background-color: ${primaryColor}20; color: ${primaryColor}">‚óè Hari ini</span>
                <span class="text-xs px-2 py-1 rounded-full" style="background-color: ${secondaryColor}20; color: ${secondaryColor}">‚óè ANC</span>
              </div>
            </div>
            <div class="grid grid-cols-7 gap-1 text-center mb-2">
              ${['Min', 'Sen', 'Sel', 'Rab', 'Kam', 'Jum', 'Sab'].map(d => `<div class="text-xs font-semibold py-2" style="color: ${textColor}; opacity: 0.5">${d}</div>`).join('')}
            </div>
            <div class="grid grid-cols-7 gap-1">
              ${calendarDays}
            </div>
          </div>

          <!-- Upcoming Schedule -->
          <div class="mb-6">
            <h3 class="font-bold text-lg mb-4" style="color: ${textColor}">üìã Jadwal Mendatang</h3>
            <div class="space-y-3">
              <div class="card-hover bg-white rounded-2xl p-4 shadow-lg flex items-center gap-4">
                <div class="w-14 h-14 rounded-xl flex flex-col items-center justify-center" style="background-color: ${secondaryColor}20">
                  <span class="text-lg font-bold" style="color: ${secondaryColor}">10</span>
                  <span class="text-xs" style="color: ${secondaryColor}">Jan</span>
                </div>
                <div class="flex-1">
                  <p class="font-semibold" style="color: ${textColor}">Kontrol ANC Rutin</p>
                  <p class="text-xs" style="color: ${textColor}; opacity: 0.6">RS Bunda Medika ‚Ä¢ 09:00 WIB</p>
                </div>
                <span class="text-2xl">üë©‚Äç‚öïÔ∏è</span>
              </div>
              <div class="card-hover bg-white rounded-2xl p-4 shadow-lg flex items-center gap-4">
                <div class="w-14 h-14 rounded-xl flex flex-col items-center justify-center" style="background-color: ${primaryColor}20">
                  <span class="text-lg font-bold" style="color: ${primaryColor}">24</span>
                  <span class="text-xs" style="color: ${primaryColor}">Jan</span>
                </div>
                <div class="flex-1">
                  <p class="font-semibold" style="color: ${textColor}">USG 4D</p>
                  <p class="text-xs" style="color: ${textColor}; opacity: 0.6">Klinik Ibu & Anak ‚Ä¢ 10:30 WIB</p>
                </div>
                <span class="text-2xl">ü©ª</span>
              </div>
            </div>
          </div>

          <!-- Tips Articles -->
          <div class="mb-6">
            <h3 class="font-bold text-lg mb-4" style="color: ${textColor}">üìö Tips Kehamilan</h3>
            <div class="space-y-3">
              <div class="card-hover bg-white rounded-2xl p-4 shadow-lg">
                <div class="flex items-start gap-3">
                  <span class="text-3xl">ü§∞</span>
                  <div>
                    <p class="font-semibold" style="color: ${textColor}">Minggu ke-24: Perkembangan Janin</p>
                    <p class="text-xs mt-1" style="color: ${textColor}; opacity: 0.7">Bayi Mama sekarang seukuran jagung! Sistem pendengaran sudah berkembang dan mulai merespon suara.</p>
                    <span class="inline-block mt-2 text-xs font-semibold" style="color: ${secondaryColor}">Baca selengkapnya ‚Üí</span>
                  </div>
                </div>
              </div>
              <div class="card-hover bg-white rounded-2xl p-4 shadow-lg">
                <div class="flex items-start gap-3">
                  <span class="text-3xl">ü•ó</span>
                  <div>
                    <p class="font-semibold" style="color: ${textColor}">Nutrisi Penting Trimester 2</p>
                    <p class="text-xs mt-1" style="color: ${textColor}; opacity: 0.7">Zat besi, kalsium, dan asam folat sangat penting untuk pertumbuhan tulang dan otak bayi.</p>
                    <span class="inline-block mt-2 text-xs font-semibold" style="color: ${secondaryColor}">Baca selengkapnya ‚Üí</span>
                  </div>
                </div>
              </div>
              <div class="card-hover bg-white rounded-2xl p-4 shadow-lg">
                <div class="flex items-start gap-3">
                  <span class="text-3xl">üßò‚Äç‚ôÄÔ∏è</span>
                  <div>
                    <p class="font-semibold" style="color: ${textColor}">Olahraga Aman untuk Bumil</p>
                    <p class="text-xs mt-1" style="color: ${textColor}; opacity: 0.7">Yoga prenatal dan jalan santai adalah pilihan terbaik untuk menjaga kebugaran selama hamil.</p>
                    <span class="inline-block mt-2 text-xs font-semibold" style="color: ${secondaryColor}">Baca selengkapnya ‚Üí</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      `;
    }

    // Initialize app
    renderCurrentScreen();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9cb0f05702654038',t:'MTc3MDYxNDY0OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
